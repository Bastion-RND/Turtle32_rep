# Turtle32_rep

Это небольшое руководство с основными учебными материалами для работы с платой Turtle32. Здесь вы можете найти примеры кода на разных языках и в разных средах разработки. Само руководство будет разделено на два оснвных раздеола по языкам программирования:
* MicroPython (Thonny IDE, esptool)
* C/C++ (Espressif IDE, Arduino, esptool)
#### Внимание при использовании одного языка программирования, вы не сможете программмировать плату на другом языке. Эти режимы программирования взаимоисключающие. Читайте внимательнее об этом в разделе ```не забывать добавить раздел```
***
## Установка драйверов
Для работы с платой на любом из языков программирования и любой из сред необходимо установить драйвера чипа CH34x. В папке ```папка``` скачиваем zip архив и запускаем файл. который там храниться. В открывшемся окне нажимаем на кнопку Install. После чего можно переходить непосредственно к настройке среды и программированием.

![image](https://github.com/Bastion-RND/Turtle32_rep/assets/133801615/2a49f5b0-c83e-45b0-aefc-871fd265bd11)

***
## Руководство по MicroPython
Для программирования микроконтроллеров с использованием MicroPython предполагается использование двух разных сред:
* Thonny IDE
* esptool

### Thonny IDE
Программа устанавливается довольно просто и легко. Для этого необходимо перейти на сайт разработчика и скачиваем файл установщик.

![image](https://github.com/Bastion-RND/Turtle32_rep/assets/133801615/ac665593-f98e-4d48-a7a3-71a1e3238eef)

Ещё одним из преимуществ можно выделить наличие русского языка как одного из оснвных языков интерфейса. Для этого заходим в раздел настроек и выбираем нужный язык. Переключите текущий интерпретатор Python на MicroPython с платой ESP32 на интересующем COM-порте (перед этим плату необходимо подключить к компьютеру).

![image](https://github.com/Bastion-RND/Turtle32_rep/assets/133801615/b6338668-f95b-452f-9a1e-cd89f589466d)

Если это первое использование платы или же до этого вы программировали на C/С++, то необходимо будет дополнительно записать на микроконтроллер ядро MicroPython для дальнейшей работы, то есть перепрошить микроконтроллер, заменив содержание его FLASH памяти. 

![image](https://github.com/Bastion-RND/Turtle32_rep/assets/133801615/fda97469-839a-47c7-b434-b7e209f0b95e)

В открывшемся окошке выбираем параметры нашей платы - семейство микроконтроллера ESP32 S3 и вариант Espressif ESP32 S3. После чего наживаем на кнопку Install и ожидаем загрузки прошивки, это может занять пару минут. 

![image](https://github.com/Bastion-RND/Turtle32_rep/assets/133801615/0d087d33-e85d-44b6-90a5-73816019ff9a)

Появившееся окошко в терминале с таким содержанием будет говорить нам об успешности выполненных действий. Это и послужит сигналом к началу работы с платой. 

![image](https://github.com/Bastion-RND/Turtle32_rep/assets/133801615/84c76e50-9b04-47f3-bf94-2f129e2f53ee)

В окошке сбоку мы можем увидеть как файлы, находящиеся на нашем устройстве, так и файлы, которые находятся на микроконтроллере. Сначала в любом из проектов первым будет исполняться файл ```boot.py```, затем остальные.

![image](https://github.com/Bastion-RND/Turtle32_rep/assets/133801615/e5d64a45-89f7-41da-b5ce-52f5ba2f5121)

Для запуска файла достаточно будет нажать на зеленую кнопку в верхней части экрана. ```Ура-Ура!```

![Анимация](https://github.com/Bastion-RND/Turtle32_rep/assets/133801615/ec501592-2565-4ad6-9363-7a87167dce3e)

***
### esptool
Для установки вам необходим Python.Установочный пакет для него можно и нужно скачать на официальном сайте. После установки Python на ваш компьютер, в командной строке (или терминале) ввести команду ```pip install esptool```. Для проверки что установка прошла успешно нужно ввести в терминале команду ```esptool.py -h``` или, если вы используете Windows - ```esptool.exe -h```. Вы увидите всю подсказку по данному модулю. Следующим шагом необходимо [скачать прошивку с официального сайта](https://micropython.org/download/ESP32_GENERIC_S3/). Устанавливаем прошивку с помощью esptool, не забыв перед установкой отформатировать плату при помощи этой команды. 

```esptool.py --port COM3 erase_flash``` 

#### При использовании команд - помните, что порт может отличаться. Посмотреть порт можно при помощи диспетчера устроство в разделе ```Порты (COM и LPT)```

```esptool.py --port COM3 --baud 460800 write_flash --flash_size=detect 0 D:\esp32s3.bin```, где *D:\esp32s3.bin* это путь к файлу с его названием, где лежит ваша прошивка.

Для загрузки собственной прошивки можно использовать следующую команду (при этом ваш код должен загружаться в формате *.bin*.

```esptool.py -b 460800 --before=default_reset --after=hard_reset write_flash --flash_mode dio --flash_freq 20m --flash_size 4MB 0x0 bootloader.bin 0x10000 my_app-0x01000.bin 0x8000 partition-table.bin 0xd000 ota_data_initial.bin```
***
## Руководство по С/С++
Для программирования микроконтроллеров с использованием MicroPython предполагается использование трех разных сред:
* Arduino
* Espressif IDE
* PlatformIO
***
### Arduino
Установка Arduino IDE является несложной и довольно понятной. Открываем установщик и следуем указаниям по установке. Запускаем IDE и приступаем к настройке среды программирования. Для того, чтобы иметь доступ к файлам прошивки ESP32, необходимо перейти в по пути ```Файл->Настройки``` и в строку *"Дополнительные ссылки для менеджера плат"* необходимо вставить следующую ссылку, а после нажимаем на кнопку "Ок":
```https://dl.espressif.com/dl/package_esp32_index.json```

Далее необходимо перейти по пути ```Инструменты->Плата``` (по умолчанию стоит Arduino Uno) и выбрать Менеджер плат.

![image](https://github.com/Bastion-RND/Turtle32_rep/assets/133801615/cbd7eece-26f5-445a-9d49-8ff34d356084)

В открывшемся окне сверху пишем в поисковой строке "esp32" и начинаем поиск. Устанавливаем пакет данных от Espressif Systems. Ожидаем окончания скачивания, это может занять некоторое время.

![image](https://github.com/Bastion-RND/Turtle32_rep/assets/133801615/36e8b221-cfb3-40f6-9a8f-567a8c6dfeea)

После снова повторяем процесс выбора платы и переходим ```Инструменты->Плата->ESP32 Arduino``` и выбираем ESP32S3 Dev Module.
![image](https://github.com/Bastion-RND/Turtle32_rep/assets/133801615/0c7ae59c-62c2-48f3-a0d3-8a5632189676)

Для загрузки кода теперь необходимо выбрать порт. Далее необходимо перейти по пути ```Инструменты->Порт```, выбираем доступный порт, к которому подключена плата.
![image](https://github.com/Bastion-RND/Turtle32_rep/assets/133801615/27d7d657-8c2f-455e-ae71-b0aa6bb66435)

### Espressif IDE

